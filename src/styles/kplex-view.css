/**
 * KPlex View Styles
 * Spatial layout and node styling for the knowledge graph
 */

:root {
  --kplex-spacing: 1rem;
  --kplex-node-size: 100px;
  --kplex-node-font: 13px;
  --kplex-central-font: 16px;
  --kplex-border-radius: 8px;
  --kplex-transition: 0.2s ease;

  /* Colors */
  --kplex-bg: var(--background-primary);
  --kplex-text: var(--text-normal);
  --kplex-border: var(--divider-color);
  --kplex-central-bg: var(--interactive-accent);
  --kplex-parent-bg: #e3f2fd;
  --kplex-child-bg: #f3e5f5;
  --kplex-friend-left-bg: #e0f2f1;
  --kplex-friend-right-bg: #fff3e0;
  --kplex-virtual-bg: #ffebee;
  --kplex-inferred-bg: #f5f5f5;
}

.dark-mode {
  --kplex-parent-bg: #1a237e;
  --kplex-child-bg: #4a148c;
  --kplex-friend-left-bg: #004d40;
  --kplex-friend-right-bg: #5d4037;
  --kplex-virtual-bg: #b71c1c;
  --kplex-inferred-bg: #424242;
}

.kplex-view {
  display: flex;
  flex-direction: column;
  height: 100%;
  padding: var(--kplex-spacing);
  background: var(--kplex-bg);
  color: var(--kplex-text);
  overflow: auto;
  font-family: var(--font-text);
}

.kplex-view--loading,
.kplex-view--empty {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: var(--text-muted);
  font-size: 14px;
}

/* Layout Grid */
.kplex-north,
.kplex-south,
.kplex-main-row {
  display: flex;
  gap: var(--kplex-spacing);
  margin: var(--kplex-spacing) 0;
  justify-content: center;
}

.kplex-main-row {
  display: flex;
  gap: calc(var(--kplex-spacing) * 2);
  align-items: flex-start;
}

.kplex-north,
.kplex-south {
  justify-content: center;
  flex-wrap: wrap;
}

.kplex-west,
.kplex-east {
  flex: 0 0 auto;
  display: flex;
  flex-direction: column;
  gap: var(--kplex-spacing);
  align-items: flex-start;
}

.kplex-east {
  align-items: flex-end;
}

.kplex-central {
  flex: 0 0 auto;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Neighborhood Container */
.kplex-neighborhood {
  display: flex;
  flex-direction: column;
  gap: calc(var(--kplex-spacing) / 2);
  align-items: center;
}

.kplex-neighborhood__label {
  font-size: 11px;
  font-weight: bold;
  text-transform: uppercase;
  color: var(--text-muted);
  letter-spacing: 0.5px;
}

.kplex-neighborhood__nodes {
  display: flex;
  gap: var(--kplex-spacing);
  flex-wrap: wrap;
  justify-content: center;
}

.kplex-neighborhood--north .kplex-neighborhood__nodes {
  flex-direction: row;
}

.kplex-neighborhood--south .kplex-neighborhood__nodes {
  flex-direction: row;
}

.kplex-neighborhood--west .kplex-neighborhood__nodes {
  flex-direction: column;
}

.kplex-neighborhood--east .kplex-neighborhood__nodes {
  flex-direction: column;
}

/* Node Styling */
.kplex-node {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  min-width: var(--kplex-node-size);
  max-width: var(--kplex-node-size);
  padding: 8px;
  background: var(--interactive-normal);
  border: 2px solid var(--kplex-border);
  border-radius: var(--kplex-border-radius);
  cursor: pointer;
  transition: all var(--kplex-transition);
  font-size: var(--kplex-node-font);
  text-align: center;
  word-break: break-word;
  overflow: hidden;
}

.kplex-node:hover {
  background: var(--interactive-hover);
  border-color: var(--interactive-accent);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.kplex-node--central {
  min-width: 140px;
  max-width: 140px;
  padding: 12px;
  background: var(--kplex-central-bg);
  color: white;
  font-size: var(--kplex-central-font);
  font-weight: bold;
  border-color: var(--kplex-central-bg);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
}

.kplex-node--central:hover {
  transform: translateY(-4px);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
}

/* Type-specific styling */
.kplex-node--file {
  background: var(--interactive-normal);
}

.kplex-node--folder {
  border-style: dashed;
  background: var(--background-secondary);
}

.kplex-node--tag {
  background: var(--background-tertiary);
  border-radius: 12px;
  font-size: 12px;
}

.kplex-node--virtual {
  background: var(--kplex-virtual-bg);
  border-style: dotted;
  opacity: 0.7;
}

.kplex-node--inferred {
  background: var(--kplex-inferred-bg);
  opacity: 0.8;
}

.kplex-node--url {
  border-radius: 4px;
  background: var(--background-secondary);
}

/* Node content */
.kplex-node__icon {
  font-size: 20px;
  line-height: 1;
}

.kplex-node__name {
  font-size: 11px;
  line-height: 1.3;
  word-break: break-word;
}

.kplex-node--central .kplex-node__icon {
  font-size: 24px;
}

.kplex-node--central .kplex-node__name {
  font-size: 13px;
}

/* Directional coloring for neighborhoods */
.kplex-north .kplex-node {
  border-top: 4px solid #1976d2;
}

.kplex-south .kplex-node {
  border-bottom: 4px solid #7b1fa2;
}

.kplex-west .kplex-node {
  border-left: 4px solid #00796b;
}

.kplex-east .kplex-node {
  border-right: 4px solid #f57c00;
}

/* Responsive */
@media (max-width: 768px) {
  :root {
    --kplex-spacing: 0.75rem;
    --kplex-node-size: 80px;
    --kplex-node-font: 12px;
  }

  .kplex-main-row {
    gap: var(--kplex-spacing);
  }

  .kplex-node {
    min-width: 70px;
    max-width: 70px;
    padding: 6px;
  }

  .kplex-node--central {
    min-width: 100px;
    max-width: 100px;
  }
}

@media (max-width: 480px) {
  :root {
    --kplex-spacing: 0.5rem;
    --kplex-node-size: 60px;
    --kplex-node-font: 10px;
  }

  .kplex-view {
    padding: var(--kplex-spacing);
  }

  .kplex-node {
    min-width: 55px;
    max-width: 55px;
    padding: 4px;
  }

  .kplex-node__icon {
    font-size: 16px;
  }

  .kplex-neighborhood__label {
    display: none;
  }
}
